{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Volumes/HDD - Veriler/projects/twitter-trends/pages/components/map.js\";\nimport { useState, useEffect } from 'react';\nimport GoogleMapReact from 'google-map-react';\nimport MapMarker from './MapMarker';\nimport TrendsBox from './TrendsBox';\nvar turkey = {\n  lat: 41.015137,\n  lng: 28.979530\n};\n\nconst Map = ({\n  eventData,\n  center,\n  zoom\n}) => {\n  const {\n    0: locationInfo,\n    1: setLocationInfo\n  } = useState({});\n  const {\n    0: trendsInfo,\n    1: setTrendsInfo\n  } = useState({});\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  /*const markers = eventData.map(item => {\n      var lat = parseFloat(item.lat);\n      var lng = parseFloat(item.long);\n      return <MapMarker lat={turkey.lat} lng={turkey.lng} onClick={() => setLocationInfo(item)} />\n  }) */\n\n  useEffect(() => {\n    // woeid 1 is wordlwide\n    fetchTrends(\"1\");\n  }, []);\n\n  async function getClickedAreasWoeid(e) {\n    var clickedPosition = {\n      lat: e.lat,\n      lng: e.lng\n    };\n    await fetch(\"/api/closest\", {\n      method: \"post\",\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(clickedPosition)\n    }).then(res => res.json()).then(function (res) {\n      const woeid = res[0].woeid;\n      fetchTrends(woeid);\n    });\n  }\n\n  async function fetchTrends(woeid) {\n    setLoading(true);\n    await fetch(\"/api/trends\", {\n      method: \"post\",\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        woeid: woeid\n      })\n    }).then(res => res.json()).then(function (response) {\n      setLoading(false);\n      var trends = response[0];\n      setTrendsInfo(trends);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"map\",\n    children: [!loading && /*#__PURE__*/_jsxDEV(GoogleMapReact, {\n      bootstrapURLKeys: {\n        key: 'AIzaSyBKcbWgVYRSdCv0PCn6dCOvgdV7MjcE-R0'\n      },\n      defaultCenter: center,\n      defaultZoom: zoom,\n      onClick: e => getClickedAreasWoeid(e)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 26\n    }, this), trendsInfo && /*#__PURE__*/_jsxDEV(TrendsBox, {\n      info: trendsInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 28\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n\nMap.defaultProps = {\n  center: {\n    lat: 42.3265,\n    lng: -122.8756\n  },\n  zoom: 1\n};\nexport default Map;","map":{"version":3,"sources":["/Volumes/HDD - Veriler/projects/twitter-trends/pages/components/map.js"],"names":["useState","useEffect","GoogleMapReact","MapMarker","TrendsBox","turkey","lat","lng","Map","eventData","center","zoom","locationInfo","setLocationInfo","trendsInfo","setTrendsInfo","loading","setLoading","fetchTrends","getClickedAreasWoeid","e","clickedPosition","fetch","method","headers","body","JSON","stringify","then","res","json","woeid","response","trends","key","defaultProps"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport GoogleMapReact from 'google-map-react'\nimport MapMarker from './MapMarker'\nimport TrendsBox from './TrendsBox'\n\nvar turkey = {\n    lat: 41.015137,\n    lng: 28.979530\n}\nconst Map = ({ eventData, center, zoom }) => {\n    const [locationInfo, setLocationInfo] = useState({});\n    const [trendsInfo, setTrendsInfo] = useState({});\n    const [loading, setLoading] = useState(false)\n\n\n    /*const markers = eventData.map(item => {\n        var lat = parseFloat(item.lat);\n        var lng = parseFloat(item.long);\n        return <MapMarker lat={turkey.lat} lng={turkey.lng} onClick={() => setLocationInfo(item)} />\n    }) */\n\n    useEffect(() => {\n        // woeid 1 is wordlwide\n        fetchTrends(\"1\");\n    }, [])\n\n\n    async function getClickedAreasWoeid(e) {\n        var clickedPosition = {\n            lat: e.lat,\n            lng: e.lng\n        }\n\n        await fetch(\"/api/closest\", {\n            method: \"post\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(clickedPosition)\n        })\n            .then(res => res.json())\n            .then(function (res) {\n                const woeid = res[0].woeid;\n                fetchTrends(woeid);\n            })\n    }\n    async function fetchTrends(woeid) {\n        setLoading(true)\n        await fetch(\"/api/trends\", {\n            method: \"post\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                woeid: woeid\n            })\n        })\n            .then(res => res.json())\n            .then(function (response) {\n                setLoading(false);\n                var trends = response[0];\n                setTrendsInfo(trends);\n            });\n    }\n\n    return (\n        <div id=\"map\">\n            {!loading && <GoogleMapReact\n                bootstrapURLKeys={{ key: 'AIzaSyBKcbWgVYRSdCv0PCn6dCOvgdV7MjcE-R0' }}\n                defaultCenter={center}\n                defaultZoom={zoom}\n                onClick={(e) => getClickedAreasWoeid(e)}\n            >\n            </GoogleMapReact>}\n            {trendsInfo && <TrendsBox info={trendsInfo} />}\n        </div>\n    )\n}\n\nMap.defaultProps = {\n    center: {\n        lat: 42.3265,\n        lng: -122.8756\n    },\n    zoom: 1\n}\n\nexport default Map"]},"metadata":{},"sourceType":"module"}