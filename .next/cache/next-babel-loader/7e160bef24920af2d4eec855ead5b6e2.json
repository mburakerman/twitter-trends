{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Volumes/HDD - Veriler/projects/twitter-trends/pages/components/map.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport GoogleMapReact from 'google-map-react';\nimport MapMarker from './MapMarker';\nimport MapInfoBox from './MapInfoBox';\nvar turkey = {\n  lat: 41.015137,\n  lng: 28.979530\n};\n\nvar Map = function Map(_ref) {\n  _s();\n\n  var eventData = _ref.eventData,\n      center = _ref.center,\n      zoom = _ref.zoom;\n\n  var _useState = useState({}),\n      locationInfo = _useState[0],\n      setLocationInfo = _useState[1];\n\n  var _useState2 = useState({}),\n      trendsInfo = _useState2[0],\n      setTrendsInfo = _useState2[1];\n\n  var markers = eventData.map(function (item) {\n    var lat = parseFloat(item.lat);\n    var lng = parseFloat(item[\"long\"]);\n    return /*#__PURE__*/_jsxDEV(MapMarker, {\n      lat: turkey.lat,\n      lng: turkey.lng,\n      onClick: function onClick() {\n        return setLocationInfo(item);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 16\n    }, _this);\n  });\n\n  function handleClick(e) {\n    var lat = e.lat;\n    var lng = e.lng;\n    fetch(\"/api/closest\", {\n      method: \"post\",\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        lat: lat,\n        lng: lng\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (res) {\n      console.log(res);\n      var woeid = res[0].woeid;\n      fetch(\"/api/trends\", {\n        method: \"post\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          woeid: woeid\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (response) {\n        var trends = response[0];\n        setTrendsInfo(trends);\n        console.log(trendsInfo);\n      });\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"map\",\n    children: [/*#__PURE__*/_jsxDEV(GoogleMapReact, {\n      bootstrapURLKeys: {\n        key: 'AIzaSyBKcbWgVYRSdCv0PCn6dCOvgdV7MjcE-R0'\n      },\n      defaultCenter: center,\n      defaultZoom: zoom,\n      onClick: function onClick(e) {\n        return handleClick(e);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"right\",\n      children: \"lorem\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, _this), trendsInfo && JSON.stringify(trendsInfo, null, 2), trendsInfo.trends.map(function (item, index) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-3 col-sm-6 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card h-100\",\n          id: id,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"card-img-top\",\n            loading: \"lazy\",\n            src: item.images[0]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 61\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body d-flex flex-column\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"card-title\",\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text\",\n              children: [\"$\", /*#__PURE__*/_jsxDEV(\"span\", {\n                children: price\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 59\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex mt-auto\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control mr-2\",\n                type: \"number\",\n                min: \"1\",\n                onChange: function onChange(event) {\n                  return setQuantity(event.target.value);\n                },\n                value: quantity,\n                placeholder: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: function onClick() {\n                  return goCheckout(quantity, priceId);\n                },\n                className: \"w-100 align-self-start btn btn-outline-primary\",\n                children: \"Buy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 28\n      }, this);\n    }), locationInfo && /*#__PURE__*/_jsxDEV(MapInfoBox, {\n      info: locationInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 30\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(Map, \"2FPd+gSfSKzf9jaPsa0SHWTySKo=\");\n\n_c = Map;\nMap.defaultProps = {\n  center: {\n    lat: 42.3265,\n    lng: -122.8756\n  },\n  zoom: 1\n};\nexport default Map;\n\nvar _c;\n\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"sources":["/Volumes/HDD - Veriler/projects/twitter-trends/pages/components/map.js"],"names":["useState","useEffect","GoogleMapReact","MapMarker","MapInfoBox","turkey","lat","lng","Map","eventData","center","zoom","locationInfo","setLocationInfo","trendsInfo","setTrendsInfo","markers","map","item","parseFloat","handleClick","e","fetch","method","headers","body","JSON","stringify","then","res","json","console","log","woeid","response","trends","key","index","id","images","name","price","event","setQuantity","target","value","quantity","goCheckout","priceId","defaultProps"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport GoogleMapReact from 'google-map-react'\nimport MapMarker from './MapMarker'\nimport MapInfoBox from './MapInfoBox'\n\nvar turkey = {\n    lat: 41.015137,\n    lng: 28.979530\n}\nconst Map = ({ eventData, center, zoom }) => {\n    const [locationInfo, setLocationInfo] = useState({});\n    const [trendsInfo, setTrendsInfo] = useState({});\n\n    const markers = eventData.map(item => {\n        var lat = parseFloat(item.lat);\n        var lng = parseFloat(item.long);\n        return <MapMarker lat={turkey.lat} lng={turkey.lng} onClick={() => setLocationInfo(item)} />\n    })\n\n\n    function handleClick(e) {\n        var lat = e.lat;\n        var lng = e.lng;\n        fetch(\"/api/closest\", {\n            method: \"post\",\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                lat: lat,\n                lng: lng\n            })\n        })\n            .then(res => res.json())\n            .then(function (res) {\n                console.log(res)\n                const woeid = res[0].woeid;\n\n                fetch(\"/api/trends\", {\n                    method: \"post\",\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        woeid: woeid\n                    })\n                })\n                    .then(res => res.json())\n                    .then(function (response) {\n                        var trends = response[0];\n                        setTrendsInfo(trends);\n                        console.log(trendsInfo)\n                    });\n            })\n    }\n\n    return (\n        <div id=\"map\">\n            <GoogleMapReact\n                bootstrapURLKeys={{ key: 'AIzaSyBKcbWgVYRSdCv0PCn6dCOvgdV7MjcE-R0' }}\n                defaultCenter={center}\n                defaultZoom={zoom}\n                onClick={(e) => handleClick(e)}\n            >\n\n            </GoogleMapReact>\n            <p className=\"right\">lorem</p>\n\n            { trendsInfo && JSON.stringify(trendsInfo, null, 2)}\n\n            {\n                trendsInfo.trends.map(function (item, index) {\n\n                    return <div key={index} className=\"col-lg-3 col-sm-6 mb-3\">\n                        <div className=\"card h-100\" id={id}><img className=\"card-img-top\" loading=\"lazy\" src={item.images[0]} />\n                            <div className=\"card-body d-flex flex-column\">\n                                <h5 className=\"card-title\">{item.name}</h5>\n                                <p className=\"card-text\">$<span>{price}</span></p>\n                                <div className=\"d-flex mt-auto\">\n                                    <input className=\"form-control mr-2\" type=\"number\" min=\"1\" onChange={(event) => setQuantity(event.target.value)} value={quantity} placeholder=\"1\" />\n                                    <button onClick={() => goCheckout(quantity, priceId)} className=\"w-100 align-self-start btn btn-outline-primary\">Buy</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>;\n                })\n            }\n\n\n            {locationInfo && <MapInfoBox info={locationInfo} />}\n        </div>\n    )\n}\n\nMap.defaultProps = {\n    center: {\n        lat: 42.3265,\n        lng: -122.8756\n    },\n    zoom: 1\n}\n\nexport default Map"]},"metadata":{},"sourceType":"module"}